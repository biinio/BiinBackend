extends ../layout_dashboard
block head_scripts
	script(src="/javascripts/angular/showcasesController.js")
block content	
	#sectionContent.max-height(ng-app="biinAppShowCases" ng-controller="showcasesController")
			#wrapperHeader.row
			#wrapperContent.row.max-height
				.panel-default.max-height
					.body-list.max-height
						.col-lg-4.col-md-3.col-sm-3.col-list.max-height
							.row(slimscroll="" slimscroll-option="{height: 'auto'}" )
								a.col-md-1.module(ng-click="create()")				
									.moduleWrapper.remove-module
										.btn-rounded.center.icon.icon-add-1
								a.col-md-1.module(ng-repeat="item in showcases | filter: query | orderBy:orderShowcases" ng-click="edit(showcases.indexOf(item))")					
									.moduleWrapper.contentHideButtons(ng-class="{active: showcases.indexOf(item) == selectedShowcase}")				
										img.img-responsive(ng-src="{{getFirstElementByPosition(item).media[0].imgUrl}}" ng-if="item.objects.length > 0" style="max-width: 250px;height: auto;" pending-indicator)
										.btnShowcasePreview.icon-round-control.btnDelete.btn-on-hover(ng-click="removeShowcaseAt(showcases.indexOf(item))")
											.icon.icon-bin-2 	
						.col-lg-8.col-md-9.col-sm-9.colOptions.max-height
							.animate-switch.max-height(ng-if="selectedShowcase!=null")
								ul.workAreaHeader.nav.nav-tabs
									li(ng-class="{active:activeTab == 'details'}")
										a(ng-click="activeTab='details'") Details
									li(ng-class="{active:activeTab == 'biins'}")
										a(ng-click="activeTab='biins'") Biins						
									li(ng-class="{active:activeTab == 'objects'}")
										a(ng-click="activeTab='objects'") Elements					
								.row.workArea.max-height.showcaseWorkArea
									.col-md-6.col-sm-6.colPreview.max-height.max-elementWidth-OverFlow
										button.center.form-group.btn.btn-default.btn-save.form-control(ng-click="saveDetail()") SAVE
										.mainWrapperShowcase(slimscroll="" slimscroll-option="{height: '95%', railVisible:true, wrapperClass:'slimScrollDivContrast'}" slimscroll-obj="showCasePreviewScroll" drop)
											.previewShowcaseWrapper
											.previewShowcaseElements.row.max-height
												.col-md1.hide.dropColumn
													.imgElementPreview
												.col-md1.moduleWrapperShowcaseElement.center.contentHideButtons(ng-repeat-start="obj in showcases[selectedShowcase].objects | orderBy:natural('position')" element-position="{{obj.position}}" droppable)
													img.imgElementPreview(ng-src="{{obj.media[0].imgUrl}}")
													div.btnShowcasePreview.icon-round-control.btn-on-hover(ng-click="removeElementAt(showcases[selectedShowcase].objects.indexOf(obj))")
															.icon.icon-bin-2 
													div.btnShowcasePreview.icon-round-control.up.btn-on-hover(ng-click="moveElementUp(showcases[selectedShowcase].objects.indexOf(obj))" ng-if="$index>0")
															.icon.icon-arrow-33
													div.btnShowcasePreview.icon-round-control.down.btn-on-hover(ng-click="moveElementDown(showcases[selectedShowcase].objects.indexOf(obj))" ng-if="$index<showcases[selectedShowcase].objects.length-1") 
															.icon.icon-arrow-34
												.col-md1.hide.dropColumn(ng-repeat-end)							
													.imgElementPreview				
									.col-md-6.col-sm-6.colPreview.max-height.col-splitter
										.tab-content.max-height(ng-switch='activeTab')					
											#details(ng-switch-when='details')
												.hidden
													input.form-control( ng-model="showcases[selectedShowcase].identifier")				
													input.form-control( ng-model="showcases[selectedShowcase].customerIdentifier")																						
													input.form-control( ng-model="showcases[selectedShowcase].organizationIdentifier")
													input.form-control( ng-model="showcases[selectedShowcase].type")										
												.row
													label Description:				
												.row
													textarea.form-group.form-control( ng-model="showcases[selectedShowcase].showcaseDescription")
											#biins.max-height(ng-switch-when='biins')
												.max-height.col-list
													.row.elementList(slimscroll slimscroll-option="{height: 'auto', railVisible:true}" droppable-biin)
														.row(ng-repeat="site in biinSite" ng-if="site.biins.length>0")
															p {{site.name}}
															a.col-md2(ng-repeat="biinEl in site.biins")
																.moduleWrapper.center(ng-class="{'disabled': (biinEl.showcaseAsigned != undefined && biinEl.showcaseAsigned !=''),'activeShowcase':biinEl.showcaseAsigned==showcases[selectedShowcase].identifier}" ng-click="setBiinToShowcase(biinSite.indexOf(site),site.biins.indexOf(biinEl))" )										
																	p {{biinEl.name}}
																	p {{biinEl.mayor}}
																	p {{showcaseAsignedz.minor}}
																	p {{biinEl.showcaseAsigned}}
											#objects.max-height(ng-switch-when='objects')		
												.max-height																				
													.row.elementList(slimscroll slimscroll-option="{height: 'auto', railVisible:true}")											
														.col-md1.moduleWrapperElement.searchElements
															input.form-control.max-width( ng-model="queryElements" placeholder="Search" autofocus)										
														a.col-md1(ng-repeat="element in elements|difference:showcases[selectedShowcase].objects:'objectIdentifier'|filter:queryElements")
															.moduleWrapperElement
																	img.imgElementPreview(ng-src="{{element.media[0].imgUrl}}" pending-indicator element-index="{{elements.indexOf(element)}}" draggable-showcase-element)
							.animate-switch(ng-if="selectedShowcase==null")				